package Business_Logics;

import java.util.ArrayList;
import java.util.List;

import org.openqa.selenium.By;
import org.springframework.stereotype.Component;

import com.tyss.optimize.common.util.CommonConstants;
import com.tyss.optimize.nlp.util.Nlp;
import com.tyss.optimize.nlp.util.NlpException;
import com.tyss.optimize.nlp.util.NlpRequestModel;
import com.tyss.optimize.nlp.util.NlpResponseModel;

import io.appium.java_client.android.AndroidDriver;

@Component("LIC19046_PJT1001_PE_NLP858863c0-de5a-4851-97d5-d57bf3986d74")
public class close_all_apps implements Nlp {
    @Override
    public List<String> getTestParameters() throws NlpException {
        List<String> params = new ArrayList<>();
        return params;
    }

    @Override
    public StringBuilder getTestCode() throws NlpException {
        StringBuilder sb = new StringBuilder();
        return sb;
    }

    @Override
    public NlpResponseModel execute(NlpRequestModel nlpRequestModel) throws NlpException {
        NlpResponseModel nlpResponseModel = new NlpResponseModel();
        AndroidDriver driver = nlpRequestModel.getAndroidDriver();
        try {
                Runtime.getRuntime().exec("adb shell input keyevent KEYCODE_APP_SWITCH");
                Thread.sleep(1000);
                driver.findElement(By.xpath("//android.widget.Button[@text='Close all']")).click();
                nlpResponseModel.setStatus(CommonConstants.pass);
                nlpResponseModel.setMessage("Successfully closed all apps");
       
        } catch (Exception e) {
            nlpResponseModel.setStatus(CommonConstants.pass);
            nlpResponseModel.setMessage("Failed to close all apps:");
        }
        return nlpResponseModel;
    }
 }

